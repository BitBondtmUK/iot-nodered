<!--
  Copyright 2014 IBM Corp.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/x-red" data-template-name="iot-new-in">
    <div class="form-row">
        <label for="node-input-type1" style="width:130px;"><i class="icon-tag"></i> Input Type</label>
		<select id="node-input-type1"  style="width:300px;">
			<option value="evt">Device Event</option>
			<option value="cmd">Device Command</option>
			<option value="devsts">Device Status</option>
			<option value="appsts">Application Status</option>
		</select>
    </div>
	<div class="form-row">
        <label for="node-input-mac" id="node-input-mac1"style="width:130px;"><i class="icon-tasks"></i> ID</label>
		<input type="checkbox" id="node-input-macchecked" style="width:10px;">
		<label for="node-input-maccheckedlabel" id="node-input-maccheckedlabel" style="width:40px;">All or </label>
        <input type="text" id="node-input-mac" placeholder="device/app id e.g. AB12CD231A21" style="width:240px;">
    </div>
    <div class="form-row">
        <label for="node-input-type2" id="node-input-type22" style="width:130px;"><i class="icon-tag"></i> Type</label>
		<input type="checkbox" id="node-input-type2checked" style="width:10px;" >
		<label for="node-input-type2checkedlabel" id="node-input-type2checkedlabel" style="width:40px;">All or </label>
        <input type="text" id="node-input-type2" placeholder="devicetype e.g. armmbed" style="width:240px;">
    </div>
    <div class="form-row">
        <label for="node-input-event" id="node-input-event1" style="width:130px;"><i class="icon-tasks"></i> Event</label>
		<input type="checkbox" id="node-input-event1checked" style="width:10px;" >
		<label for="node-input-event1checkedlabel" id="node-input-event1checkedlabel" style="width:40px;">All or </label>
        <input type="text" id="node-input-event" placeholder="event/command format e.g. blink" style="width:240px;">
    </div>
    <div class="form-row">
        <label for="node-input-format" id="node-input-format1"  style="width:130px;"><i class="icon-file"></i> Format</label>
		<input type="checkbox" id="node-input-formatchecked" style="width:10px;" >
		<label for="node-input-formatcheckedlabel" id="node-input-formatcheckedlabel" style="width:40px;">All or </label>
        <input type="text" id="node-input-format" placeholder="format e.g. JSON" style="width:240px;">
    </div>

	<div class="form-row">
        <label for="node-input-name" style="width:130px;"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="iot-new-in" style="width:300px;">
    </div>
    <div class="form-tips">
		<b>Note:</b> Registered flow allows Device Commands, as well as, Device Event, to be sent to the Device or App.<br/>
		Check the info tab, to get more information about each of the fields
	</div>
    <script>

        $("#node-input-type1").change(function() {
			var id = $("#node-input-type1 option:selected").val();
            if (id == "evt") {
				document.getElementById('node-input-mac1').innerHTML='<i class="icon-tasks"></i> ID</label>';
				document.getElementById('node-input-event1').innerHTML='<i class="icon-tasks"></i> Event';
				$("#node-input-event1").show();
				$("#node-input-event").show();
				$("#node-input-event1checked").show();
				$("#node-input-event1checkedlabel").show();
				$("#node-input-format1").show();
				$("#node-input-format").show();
				$("#node-input-formatchecked").show();
				$("#node-input-formatcheckedlabel").show();
				$("#node-input-type22").show();
				$("#node-input-type2").show();
				$("#node-input-type2checked").show();
				$("#node-input-type2checked").show();
				$("#node-input-type2checkedlabel").show();
			} else if (id == "devsts"){
				document.getElementById('node-input-mac1').innerHTML='<i class="icon-tasks"></i> ID</label>';
				$("#node-input-event1").hide();
				$("#node-input-event1checked").hide();
				$("#node-input-event1checkedlabel").hide();
				$("#node-input-event").hide();
				$("#node-input-format1").hide();
				$("#node-input-format").hide();
				$("#node-input-formatchecked").hide();
				$("#node-input-formatcheckedlabel").hide();
				$("#node-input-type22").show();
				$("#node-input-type2").show();
				$("#node-input-type2checked").show();
				$("#node-input-type2checkedlabel").show();
			} else if (id == "cmd"){
				document.getElementById('node-input-mac1').innerHTML='<i class="icon-tasks"></i> ID</label>';
				document.getElementById('node-input-event1').innerHTML='<i class="icon-tasks"></i> Command';
				$("#node-input-event1").show();
				$("#node-input-event1checked").show();
				$("#node-input-event1checkedlabel").show();
				$("#node-input-event").show();
				$("#node-input-format1").show();
				$("#node-input-format").show();
				$("#node-input-formatchecked").show();
				$("#node-input-formatcheckedlabel").show();
				$("#node-input-type22").show();
				$("#node-input-type2").show();
				$("#node-input-type2checked").show();
				$("#node-input-type2checkedlabel").show();
			} else if (id == "appsts") {
				document.getElementById('node-input-mac1').innerHTML='<i class="icon-tasks"></i> App ID</label>';
				$("#node-input-event1").hide();
				$("#node-input-event1checked").hide();
				$("#node-input-event1checkedlabel").hide();
				$("#node-input-event").hide();
				$("#node-input-format1").hide();
				$("#node-input-format").hide();
				$("#node-input-formatchecked").hide();
				$("#node-input-formatcheckedlabel").hide();
				$("#node-input-type22").hide();
				$("#node-input-type2").hide();
				$("#node-input-type2checked").hide();
				$("#node-input-type2checkedlabel").hide();
			}
		});

		$("#node-input-macchecked").click(function() {
			console.log("INSIDE CHECKED.....");
			mac = "+";
		});
    </script>


</script>

<script type="text/x-red" data-help-name="iot-new-in">
   <p>IoT input node to receive events sent from devices, receive commands sent to devices, receive status updates of devices or receive status updates of applications.</p>
</script>

</script>

<script type="text/x-red" data-template-name="iot-new-out">

    <div class="form-row">
        <label for="node-input-type1" style="width:130px;"><i class="icon-tag"></i> Input Type</label>
		<select id="node-input-type1"  style="width:300px;">
			<option value="evt">Device Event</option>
			<option value="cmd">Device Command</option>
		</select>
    </div>

	<div class="form-row">
        <label for="node-input-mac" style="width:130px;"><i class="icon-tasks"></i> ID</label>
        <input type="text" id="node-input-mac" placeholder="deviceid e.g. AB12CD231A21" style="width:300px;">
    </div>
    <div class="form-row">
        <label for="node-input-type2" style="width:130px;"><i class="icon-tag"></i> Type</label>
        <input type="text" id="node-input-type2" placeholder="devicetype e.g. armmbed" style="width:300px;">
    </div>
    <div class="form-row">
        <label for="node-input-event" style="width:130px;"><i class="icon-tasks"></i> Event</label>
        <input type="text" id="node-input-event" placeholder="command/event format e.g blink" style="width:300px;">
    </div>
    <div class="form-row">
        <label for="node-input-format" style="width:130px;"><i class="icon-file"></i> Format</label>
        <input type="text" id="node-input-format" placeholder="format e.g. json" style="width:300px;">
    </div>
    <div class="form-row">
        <label for="node-input-data" style="width:130px;"><i class="icon-envelope"></i> Data</label>
        <input type="text" id="node-input-data" placeholder="payload information i.e. data points" style="width:300px;">
    </div>

	<div class="form-row">
        <label for="node-input-name" style="width:130px;"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="iot-new-out" style="width:300px;">
    </div>

    <div class="form-tips">
		<b>Note:</b> If "Id", "Type", "Event", "Format" and "Data" are not passed from backend, the values given above would be considered.<br/>
		<b>Data Example:</b>{"d":{"myName":"Arduino Uno", "temperature":989}}
	</div>
</script>

<script type="text/x-red" data-help-name="iot-new-out">
   <p>IoT output node to send commands to devices or sending an event, on the behalf of a device </p>
   <p><b>Note:</b> If "MAC address", "Type", "Event", "Format" and "Data" are not passed from backend, the values given above would be considered.</p>
   <p>To override the default values given above, use the following properties
   <p>For <b>MAC Address</b>, use msg.id, for e.g. msg.id = '00aabbccde03'</p>
   <p>For <b>Type</b>, use msg.deviceType, for e.g. msg.deviceType = 'ArduinoUno'</p>
   <p>For <b>Format</b>, use msg.format, for e.g. msg.format = 'json'</p>
   <p>For <b>Event</b>, use msg.eventCommandType, for e.g. msg.eventCommandType = 'blink'</p>
   <p>For <b>Data</b>, use msg.payload, for e.g. msg.payload = '{"d":{"myName":"Arduino Uno", "temperature":989}'</p>

</script>


<script type="text/javascript">
    (function(){
        RED.nodes.registerType('iot-new-in',{
            category: 'input',
            color:"rgb(0, 155, 255)",
            defaults: {
                name: { value:"IoT Registered App In" },
				mac: {value:""},
				type1: {value:""},
				type2: {value:""},
				event: {value:""},
				format: {value:""},
				macchecked: {value: ""},
				type2checked: {value: ""},
				event1checked: {value: ""},
				formatchecked: {value: ""}
            },
            inputs:0,
            outputs:1,
            icon: "iotcloud-icon.png",
            label: function() {
                return this.name || "iot-new-in";
            },
            labelStyle: function() {
                return this.name ? "node_label_italic" : "";
            }
        });

        RED.nodes.registerType('iot-new-out',{
            category: 'output',
            color:"rgb(0, 155, 255)",
            defaults: {
                name: { value:"IoT Registered App Out" },
				mac: {value:"", required:true},
				type1: {value:""},
				type2: {value:"", required:true},
				event: {value:"", required:true},
				format: {value:"", required:true},
				data: {value:"", required:true}
            },
            inputs:1,
            outputs:0,
            icon: "iotcloud-icon.png",
            align: "right",
            label: function() {
                return this.name || "iot-new-out";
            },
            labelStyle: function() {
                return this.name ? "node_label_italic" : "";
            }
        });
    }());
</script>


<!--
  Copyright 2014 IBM Corp.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/x-red" data-template-name="iotdualapp out">

    <div class="form-row">
        <label for="node-input-inputType" id="node-input-inputTypeLabel" style="width:130px;"><i class="icon-tag"></i> Output Type</label>
		<select id="node-input-inputType"  style="width:300px;">
			<option value="evt">Device Event</option>
			<option value="cmd">Device Command</option>
		</select>
    </div>

	<div class="form-row">
        <label for="node-input-mac" id="node-input-macLabel" style="width:130px;"><i class="icon-tasks"></i> Device Id</label>
        <input type="text" id="node-input-mac" placeholder="deviceid e.g. ab12cd231a21" style="width:300px;">
    </div>
    <div class="form-row">
        <label for="node-input-deviceType" id="node-input-deviceTypeLabel" style="width:130px;"><i class="icon-tag"></i> Device Type</label>
        <input type="text" id="node-input-deviceType" placeholder="devicetype e.g. armmbed" style="width:300px;">
    </div>
    <div class="form-row">
        <label for="node-input-eventCommandType" id="node-input-eventCommandTypeId" style="width:130px;"><i class="icon-tasks"></i> Event Type</label>
        <input type="text" id="node-input-eventCommandType" placeholder="command/event format e.g blink" style="width:300px;">
    </div>
    <div class="form-row">
        <label for="node-input-format" id="node-input-formatLabel"style="width:130px;"><i class="icon-file"></i> Format</label>
        <input type="text" id="node-input-format" placeholder="format e.g. json" style="width:300px;">
    </div>
    <div class="form-row">
        <label for="node-input-data" style="width:130px;"><i class="icon-envelope"></i> Data</label>
        <input type="text" id="node-input-data" placeholder="payload information i.e. data points" style="width:300px;">
    </div>
	<div class="form-row hidden">
        <label for="node-input-apikey" style="width:130px;"><i class="icon-envelope"></i> API Key</label>
        <input type="text" id="node-input-apikey" placeholder="API Key" style="width:300px;">
    </div>
    <div class="form-row hidden">
        <label for="node-input-apitoken" style="width:130px;"><i class="icon-envelope"></i> API Token</label>
        <input type="text" id="node-input-apitoken" placeholder="API Token" style="width:300px;">
    </div>

	<div class="form-row">
        <label for="node-input-name" style="width:130px;"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="iot-new-out" style="width:300px;">
    </div>

	<div class="form-row hidden">
        <label for="node-input-service" style="width:130px;"><i class="icon-tag"></i> Service</label>
        <input type="text" id="node-input-service" placeholder="iot-new-out" style="width:300px;">
    </div>

    <div class="form-tips">
		<div id="registeredTips">
			<b>Registered Flow:</b> If "Output Type", "Device Id", "Event Type (or Command Type)", "Format" and "Data" are not passed from backend, the values given in the textfields, above, would be considered.<br/>
		</div>

		<div id="quickstartTips">
			<b>Quickstart Flow:</b> If "Device Id", "Event Type", and "Data" are not passed from backend, the values given in the textfields, above, would be considered.<br/>
		</div>

		<b>Data Example:</b>{"d":{"myName":"Arduino Uno", "temperature":989}}
	</div>
</script>

<script type="text/x-red" data-help-name="iotdualapp out">
   <p>IoT output node to send commands (only in case of Registered flow) to devices or sending an event, on the behalf of a device </p>
   <p><b>Note:</b> If "MAC address / Id", "Type", "Event", "Format" and "Data" are not passed from backend, the values given in the textfield would be considered.</p>
   <p>To override the default values given in the textfield, use the following properties
   <p>For <b>Id / MAC Address</b>, use msg.id, for e.g. msg.id = '00aabbccde03'</p>
   <p>For <b>Type</b>, use msg.deviceType, for e.g. msg.deviceType = 'ArduinoUno'</p>
   <p>For <b>Format</b>, use msg.format, for e.g. msg.format = 'json'</p>
   <p>For <b>Event</b>, use msg.eventCommandType, for e.g. msg.eventCommandType = 'blink'</p>
   <p>For <b>Data</b>, use msg.payload, for e.g. msg.payload = '{"d":{"myName":"Arduino Uno", "temperature":989}'</p>
</script>


<script type="text/x-red" data-template-name="iotdualapp in">
    <div class="form-row">
        <label for="node-input-inputType" id="node-input-inputTypeLabel" style="width:130px;"><i class="icon-tag"></i> Input Type</label>
		<select id="node-input-inputType"  style="width:300px;">
			<option value="evt">Device Event</option>
			<option value="cmd" id="node-input-inputTypeCmd">Device Command</option>
			<option value="devsts">Device Status</option>
			<option value="appsts">Application Status</option>
		</select>
    </div>
	<div class="form-row">
        <label for="node-input-mac" id="node-input-macLabel"style="width:130px;"><i class="icon-tasks"></i> ID</label>
		<input type="checkbox" id="node-input-macChecked" style="width:10px;">
		<label for="node-input-macCheckedLabel" id="node-input-macCheckedLabel" style="width:40px;">All or </label>
        <input type="text" id="node-input-mac" placeholder="device/app id e.g. ab12cd231a21" style="width:240px;">
    </div>
    <div class="form-row">
        <label for="node-input-deviceType" id="node-input-deviceTypeLabel" style="width:130px;"><i class="icon-tag"></i> Device Type</label>
		<input type="checkbox" id="node-input-deviceTypeChecked" style="width:10px;" >
		<label for="node-input-deviceTypeCheckedLabel" id="node-input-deviceTypeCheckedLabel" style="width:40px;">All or </label>
        <input type="text" id="node-input-deviceType" placeholder="devicetype e.g. armmbed" style="width:240px;">
    </div>
    <div class="form-row">
        <label for="node-input-event" id="node-input-eventLabel" style="width:130px;"><i class="icon-tasks"></i> Event</label>
		<input type="checkbox" id="node-input-eventChecked" style="width:10px;" >
		<label for="node-input-eventCheckedLabel" id="node-input-eventCheckedLabel" style="width:40px;">All or </label>
        <input type="text" id="node-input-eventCommandType" placeholder="event format e.g. blink" style="width:240px;">
    </div>
    <div class="form-row">
        <label for="node-input-format" id="node-input-formatLabel"  style="width:130px;"><i class="icon-file"></i> Format</label>
		<input type="checkbox" id="node-input-formatChecked" style="width:10px;" >
		<label for="node-input-formatCheckedLabel" id="node-input-formatCheckedLabel" style="width:40px;">All or </label>
        <input type="text" id="node-input-format" placeholder="format e.g. json" style="width:240px;">
    </div>

	<div class="form-row">
        <label for="node-input-name" style="width:130px;"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="iot-new-in" style="width:300px;">
    </div>

	<div class="form-row hidden">
        <label for="node-input-service" style="width:130px;"><i class="icon-tag"></i> Service</label>
        <input type="text" id="node-input-service" placeholder="iot-new-out" style="width:300px;">
    </div>

    <div class="form-tips">
		<div id="registeredTips">
			<b>Registered Flow:</b> Registered flow allows Device Commands, Device Events, Device Status, as well as, App Status, to be sent to the App.<br/>
		</div>

		<div id="quickstartTips">
			<b>Quickstart Flow:</b> Quickstart flow allows only Device Events, Device Status and App Status to be sent to the App.<br />
		</div>

		Check the info tab, to get more information about each of the fields
	</div>

</script>


<script type="text/x-red" data-help-name="iotdualapp in">
	<p>IoT input node to receive events sent from devices, receive commands sent to devices (only in case of Registered flow), receive status updates of devices or receive status updates of applications.</p>
	<p><b>Note:</b>The values of "macChecked", "deviceTypeChecked", "eventChecked", and "formatChecked" are irrelevant in <b>Quickstart</b> Mode.</p>
</script>


<script type="text/javascript">
	RED.nodes.registerType('iotdualapp out',{
		category: 'output',
		color:"rgb(0, 155, 255)",
		defaults: {
			inputType: {value:""},
			mac: {value:"", required: true},
			deviceType: {value:"", required: true},
			eventCommandType: {value:"", required: true},
			format: {value:"", required: true},
			data: {value:"", required: true},
			name: { value:"IoT Dual App Out" },
			service: {value: ""}
		},
		inputs:1,
		outputs:0,
		icon: "iotcloud-icon.png",
		align: "right",
		label: function() {
			return this.name || "iotdualapp out";
		},
		labelStyle: function() {
			return this.name ? "node_label_italic" : "";
		},
		oneditprepare: function() {
			result = "";
			$.getJSON('iotFoundation/newcredential?ts=' + Math.random(), function(data) {
					if(data.service !== 'registered') {
						result = "quickstart";
						$('#node-input-service').val(result);
						document.getElementById('node-input-macLabel').innerHTML='<i class="icon-tasks"></i> Device Id</label>';
						document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="icon-tasks"></i> Event Type</label>';
						$('#node-input-eventCommandType').attr("placeholder", "event type e.g. blink");

						$('#node-input-inputType').val("evt");
						$("#node-input-inputTypeLabel").hide();
						$("#node-input-inputType").hide();
						$("#node-input-deviceTypeLabel").hide();
						$("#node-input-deviceType").val(data.version);
						$("#node-input-deviceType").hide();
						$("#node-input-formatLabel").hide();
						$("#node-input-format").val("json");
						$("#node-input-format").hide();

						$("#registeredTips").hide();
						$("#quickstartTips").show();

					} else {
						result = "registered";

						var id = $("#node-input-inputType").val();
						if (id == "evt") {
							document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="icon-tasks"></i> Event Type</label>';
							$('#node-input-eventCommandType').attr("placeholder", "event type e.g. blink");
						}

						if (id == "cmd") {
							document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="icon-tasks"></i> Command Type</label>';
							$('#node-input-eventCommandType').attr("placeholder", "command type e.g. blink");
						}


						$('#node-input-service').val(result);
						$("#node-input-inputTypeLabel").show();
						$("#node-input-inputType").show();
						$("#node-input-deviceTypeLabel").show();
						$("#node-input-deviceType").show();
						$("#node-input-formatLabel").show();
						$("#node-input-format").show();

						$("#registeredTips").show();
						$("#quickstartTips").hide();

						$("#node-input-inputType").change(function() {
							var id = $("#node-input-inputType option:selected").val();
							if (id == "evt") {
								document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="icon-tasks"></i> Event Type</label>';
								$('#node-input-eventCommandType').attr("placeholder", "event type e.g. blink");
							} else if (id == "cmd") {
								document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="icon-tasks"></i> Command Type</label>';
								$('#node-input-eventCommandType').attr("placeholder", "command type e.g. blink");
							}
						});
					}
				}
			);

/*
            $.ajax({
                url: 'iotFoundation/newcredential?ts=' + Math.random(),
                type: 'GET',
                success:function(result){
					alert("SUCCESSFUL");
				},
				statusCode: {
					403: function() {
						alert(result.service);
						result = "quickstart";
						$('#node-input-service').val(result);
						document.getElementById('node-input-macLabel').innerHTML='<i class="icon-tasks"></i> Device Id</label>';
						document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="icon-tasks"></i> Event Type</label>';
						$('#node-input-eventCommandType').attr("placeholder", "event type e.g. blink");

						$('#node-input-inputType').val("evt");
						$("#node-input-inputTypeLabel").hide();
						$("#node-input-inputType").hide();
						$("#node-input-deviceTypeLabel").hide();
						$("#node-input-deviceType").val(" ");
						$("#node-input-deviceType").hide();
						$("#node-input-formatLabel").hide();
						$("#node-input-format").val("json");
						$("#node-input-format").hide();
					},
					200: function() {
						alert(result.service);
						result = "registered";

						var id = $("#node-input-inputType").val();
						if (id == "evt") {
							document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="icon-tasks"></i> Event Type</label>';
							$('#node-input-eventCommandType').attr("placeholder", "event type e.g. blink");
						}

						if (id == "cmd") {
							document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="icon-tasks"></i> Command Type</label>';
							$('#node-input-eventCommandType').attr("placeholder", "command type e.g. blink");
						}


						$('#node-input-service').val(result);
						$("#node-input-inputTypeLabel").show();
						$("#node-input-inputType").show();
						$("#node-input-deviceTypeLabel").show();
						$("#node-input-deviceType").show();
						$("#node-input-formatLabel").show();
						$("#node-input-format").show();

						$("#node-input-inputType").change(function() {
							var id = $("#node-input-inputType option:selected").val();
							if (id == "evt") {
								document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="icon-tasks"></i> Event Type</label>';
								$('#node-input-eventCommandType').attr("placeholder", "event type e.g. blink");
							} else if (id == "cmd") {
								document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="icon-tasks"></i> Command Type</label>';
								$('#node-input-eventCommandType').attr("placeholder", "command type e.g. blink");
							}
						});
					} 
				}
			});
*/
		}
	});
</script>

<script type="text/javascript">
	RED.nodes.registerType('iotdualapp in',{
		category: 'input',
		color:"rgb(0, 155, 255)",
		defaults: {
			inputType: {value:""},
			mac: {value:""},
			deviceType: {value:""},
			eventCommandType: {value:""},
			format: {value:""},
			name: { value:"IoT Dual App In" },
			service: {value:""},
			macChecked: {value: ""},
			deviceTypeChecked: {value: ""},
			eventChecked: {value: ""},
			formatChecked: {value: ""}

		},
		inputs:0,
		outputs:1,
		icon: "iotcloud-icon.png",
		label: function() {
			return this.name || "iot-new-in";
		},
		labelStyle: function() {
				return this.name ? "node_label_italic" : "";
		},
		oneditprepare: function() {
			result = "";
            $.ajax({
                url: 'iotFoundation/credential?ts=' + Math.random(),
                type: 'GET',
                success:function(result){
				
				},
				statusCode: {
					403: function() {
						result = "quickstart";

						var id = $("#node-input-inputType").val();
						if (id == "evt") {
							document.getElementById('node-input-macLabel').innerHTML='<i class="icon-tasks"></i> Device Id</label>';
							$('#node-input-mac').attr("placeholder", "device id e.g. ab12cd231a21");
						}

						if (id == "evt") {
							document.getElementById('node-input-macLabel').innerHTML='<i class="icon-tasks"></i> Device Id</label>';
							$('#node-input-mac').attr("placeholder", "device id e.g. ab12cd231a21");
						}

						if (id == "devsts") {
							document.getElementById('node-input-macLabel').innerHTML='<i class="icon-tasks"></i> Device Id</label>';
							$('#node-input-mac').attr("placeholder", "device id e.g. ab12cd231a21");
						}

						if (id == "appsts") {
							document.getElementById('node-input-macLabel').innerHTML='<i class="icon-tasks"></i> App Id</label>';
							$('#node-input-mac').attr("placeholder", "app id e.g. myapp02");
						}

						$('#node-input-service').val(result);

						$("#node-input-inputTypeCmd").hide();
						$("#node-input-macCheckedLabel").hide();
						$("#node-input-macChecked").prop("checked", false);
						$("#node-input-macChecked").hide();
						$("#node-input-deviceTypeLabel").hide();
						$("#node-input-deviceType").val("+");
						$("#node-input-deviceType").hide();
						$("#node-input-deviceTypeCheckedLabel").hide();
						$("#node-input-deviceTypeChecked").prop("checked", true);
						$("#node-input-deviceTypeChecked").hide();
						$("#node-input-eventLabel").hide();
						$("#node-input-eventCommandType").val("+");
						$("#node-input-eventCommandType").hide();
						$("#node-input-eventCheckedLabel").hide();
						$("#node-input-eventChecked").prop("checked", true);
						$("#node-input-eventChecked").hide();
						$("#node-input-formatLabel").hide();
						$("#node-input-format").val("json");
						$("#node-input-format").hide();
						$("#node-input-formatCheckedLabel").hide();
						$("#node-input-formatChecked").hide();		
						
						$("#registeredTips").hide();
						$("#quickstartTips").show();

						var macCheckedValue = $("#node-input-macChecked").is(":checked");
						if( macCheckedValue) {
							$("#node-input-mac").prop("disabled", false);
						}

						var deviceTypeCheckedValue = $("#node-input-deviceTypeChecked").is(":checked");
						if( deviceTypeCheckedValue) {
							$("#node-input-deviceType").prop("disabled", false);
						}
						
						var eventCheckedValue = $("#node-input-eventChecked").is(":checked");
						if( eventCheckedValue) {
							$("#node-input-eventCommandType").prop("disabled", false);
						}

						var formatCheckedValue = $("#node-input-formatChecked").is(":checked");
						if( formatCheckedValue) {
							$("#node-input-format").prop("disabled", false);
						}

						var inputTypeSelected = $("#node-input-inputType").val();
						if( inputTypeSelected == "cmd") {
							$("#node-input-inputType").val("evt");
						}


						$("#node-input-inputType").change(function() {
							var id = $("#node-input-inputType option:selected").val();

							if (id == "evt") {
								document.getElementById('node-input-macLabel').innerHTML='<i class="icon-tasks"></i> Device Id</label>';
								$('#node-input-mac').attr("placeholder", "device id e.g. ab12cd231a21");
							}

							if (id == "evt") {
								document.getElementById('node-input-macLabel').innerHTML='<i class="icon-tasks"></i> Device Id</label>';
								$('#node-input-mac').attr("placeholder", "device id e.g. ab12cd231a21");
							}

							if (id == "devsts") {
								document.getElementById('node-input-macLabel').innerHTML='<i class="icon-tasks"></i> Device Id</label>';
								$('#node-input-mac').attr("placeholder", "device id e.g. ab12cd231a21");
							}

							if (id == "appsts") {
								document.getElementById('node-input-macLabel').innerHTML='<i class="icon-tasks"></i> App Id</label>';
								$('#node-input-mac').attr("placeholder", "app id e.g. myapp02");
							}
						});

					},
					200: function() {
						result = "registered";
						$('#node-input-service').val(result);
						$("#node-input-inputTypeCmd").show();
						$("#node-input-inputType").show();
						$("#node-input-macCheckedLabel").show();
						$("#node-input-macChecked").show();
						$("#node-input-deviceTypeLabel").show();
						$("#node-input-deviceType").show();
						$("#node-input-deviceTypeCheckedLabel").show();
						$("#node-input-deviceTypeChecked").show();
						$("#node-input-eventLabel").show();
						$("#node-input-eventCommandType").show();
						$("#node-input-eventCheckedLabel").show();
						$("#node-input-eventChecked").show();
						$("#node-input-formatLabel").show();
						$("#node-input-format").show();					
						$("#node-input-formatCheckedLabel").show();
						$("#node-input-formatChecked").show();					

						$("#registeredTips").show();
						$("#quickstartTips").hide();

						var macCheckedValue = $("#node-input-macChecked").is(":checked");
						if( macCheckedValue) {
							$("#node-input-mac").prop("disabled", true);
						} else {
							$("#node-input-mac").prop("disabled", false);
						}
						$("#node-input-macChecked").change(function() {
							if($("#node-input-macChecked").is(":checked")) {
								$("#node-input-mac").prop("disabled", true);
							} else {
								$("#node-input-mac").prop("disabled", false);
							}
						});

						var deviceTypeCheckedValue = $("#node-input-deviceTypeChecked").is(":checked");
						if( deviceTypeCheckedValue) {
							$("#node-input-deviceType").prop("disabled", true);
						} else {
							$("#node-input-deviceType").prop("disabled", false);
						}
						$("#node-input-deviceTypeChecked").change(function() {
							if($("#node-input-deviceTypeChecked").is(":checked")) {
								$("#node-input-deviceType").prop("disabled", true);
							} else {
								$("#node-input-deviceType").prop("disabled", false);
							}
						});

						var eventCheckedValue = $("#node-input-eventChecked").is(":checked");
						if( eventCheckedValue) {
							$("#node-input-eventCommandType").prop("disabled", true);
						} else {
							$("#node-input-eventCommandType").prop("disabled", false);
						}
						$("#node-input-eventChecked").change(function() {
							if($("#node-input-eventChecked").is(":checked")) {
								$("#node-input-eventCommandType").prop("disabled", true);
							} else {
								$("#node-input-eventCommandType").prop("disabled", false);
							}
						});

						var formatCheckedValue = $("#node-input-formatChecked").is(":checked");
						if( formatCheckedValue) {
							$("#node-input-format").prop("disabled", true);
						} else {
							$("#node-input-format").prop("disabled", false);
						}
						$("#node-input-formatChecked").change(function() {
							if($("#node-input-formatChecked").is(":checked")) {
								$("#node-input-format").prop("disabled", true);
							} else {
								$("#node-input-format").prop("disabled", false);
							}
						});

						var id = $("#node-input-inputType").val();
						if (id == "evt") {
							document.getElementById('node-input-eventLabel').innerHTML='<i class="icon-tasks"></i> Event';
							$('#node-input-eventCommandType').attr("placeholder", "event format e.g. blink");
							$('#node-input-mac').attr("placeholder", "device id e.g. ab12cd231a21");
							$("#node-input-eventLabel").show();
							$("#node-input-eventChecked").show();
							$("#node-input-eventCheckedLabel").show();
							$("#node-input-eventCommandType").show();
					
							$("#node-input-formatLabel").show();
							$("#node-input-format").show();
							$("#node-input-formatChecked").show();
							$("#node-input-formatCheckedLabel").show();
							$("#node-input-deviceTypeLabel").show();
							$("#node-input-deviceType").show();
							$("#node-input-deviceTypeChecked").show();
							$("#node-input-deviceTypeCheckedLabel").show();

					
						} else if (id == "devsts"){
							$("#node-input-eventLabel").hide();
							$('#node-input-mac').attr("placeholder", "device id e.g. ab12cd231a21");
							$("#node-input-eventChecked").hide();
							$("#node-input-eventCheckedLabel").hide();
							$("#node-input-eventCommandType").hide();
					
							$("#node-input-formatLabel").hide();
							$("#node-input-format").hide();
							$("#node-input-formatChecked").hide();
							$("#node-input-formatCheckedLabel").hide();
							$("#node-input-deviceTypeLabel").show();
							$("#node-input-deviceType").show();
							$("#node-input-deviceTypeChecked").show();
							$("#node-input-deviceTypeCheckedLabel").show();
					
						} else if (id == "cmd"){
							document.getElementById('node-input-eventLabel').innerHTML='<i class="icon-tasks"></i> Command';
							$('#node-input-eventCommandType').attr("placeholder", "command format e.g. blink");
							$('#node-input-mac').attr("placeholder", "device id e.g. ab12cd231a21");
							$("#node-input-eventLabel").show();
							$("#node-input-eventChecked").show();
							$("#node-input-eventCheckedLabel").show();
							$("#node-input-eventCommandType").show();
					
							$("#node-input-formatLabel").show();
							$("#node-input-format").show();
							$("#node-input-formatChecked").show();
							$("#node-input-formatCheckedLabel").show();
							$("#node-input-deviceTypeLabel").show();
							$("#node-input-deviceType").show();
							$("#node-input-deviceTypeChecked").show();
							$("#node-input-deviceTypeCheckedLabel").show();
						} else if (id == "appsts") {
							$('#node-input-mac').attr("placeholder", "app id e.g. myapp02");
							$("#node-input-eventLabel").hide();
							$("#node-input-eventChecked").hide();
							$("#node-input-eventCheckedLabel").hide();
							$("#node-input-eventCommandType").hide();
					
							$("#node-input-formatLabel").hide();
							$("#node-input-format").hide();
							$("#node-input-formatChecked").hide();
							$("#node-input-formatCheckedLabel").hide();
							$("#node-input-deviceTypeLabel").hide();
							$("#node-input-deviceType").hide();
							$("#node-input-deviceTypeChecked").hide();
							$("#node-input-deviceTypeCheckedLabel").hide();

						} else {
//								alert("CAME HERE........" + id);

						}

						$("#node-input-inputType").change(function() {
							var id = $("#node-input-inputType option:selected").val();
							if (id == "evt") {
								document.getElementById('node-input-eventLabel').innerHTML='<i class="icon-tasks"></i> Event';
								$('#node-input-eventCommandType').attr("placeholder", "event format e.g. blink");
								$('#node-input-mac').attr("placeholder", "device id e.g. ab12cd231a21");
								$("#node-input-eventLabel").show();
								$("#node-input-eventChecked").show();
								$("#node-input-eventCheckedLabel").show();
								$("#node-input-eventCommandType").show();
						
								$("#node-input-formatLabel").show();
								$("#node-input-format").show();
								$("#node-input-formatChecked").show();
								$("#node-input-formatCheckedLabel").show();
								$("#node-input-deviceTypeLabel").show();
								$("#node-input-deviceType").show();
								$("#node-input-deviceTypeChecked").show();
								$("#node-input-deviceTypeCheckedLabel").show();

						
							} else if (id == "devsts"){
								$("#node-input-eventLabel").hide();
								$('#node-input-mac').attr("placeholder", "device id e.g. ab12cd231a21");
								$("#node-input-eventChecked").hide();
								$("#node-input-eventCheckedLabel").hide();
								$("#node-input-eventCommandType").hide();
						
								$("#node-input-formatLabel").hide();
								$("#node-input-format").hide();
								$("#node-input-formatChecked").hide();
								$("#node-input-formatCheckedLabel").hide();
								$("#node-input-deviceTypeLabel").show();
								$("#node-input-deviceType").show();
								$("#node-input-deviceTypeChecked").show();
								$("#node-input-deviceTypeCheckedLabel").show();
						
							} else if (id == "cmd"){
								document.getElementById('node-input-eventLabel').innerHTML='<i class="icon-tasks"></i> Command';
								$('#node-input-eventCommandType').attr("placeholder", "command format e.g. blink");
								$("#node-input-eventLabel").show();
								$('#node-input-mac').attr("placeholder", "device id e.g. ab12cd231a21");
								$("#node-input-eventChecked").show();
								$("#node-input-eventCheckedLabel").show();
								$("#node-input-eventCommandType").show();
						
								$("#node-input-formatLabel").show();
								$("#node-input-format").show();
								$("#node-input-formatChecked").show();
								$("#node-input-formatCheckedLabel").show();
								$("#node-input-deviceTypeLabel").show();
								$("#node-input-deviceType").show();
								$("#node-input-deviceTypeChecked").show();
								$("#node-input-deviceTypeCheckedLabel").show();
							} else if (id == "appsts") {
								$("#node-input-eventLabel").hide();
								$('#node-input-mac').attr("placeholder", "app id e.g. myapp02");
								$("#node-input-eventChecked").hide();
								$("#node-input-eventCheckedLabel").hide();
								$("#node-input-eventCommandType").hide();
						
								$("#node-input-formatLabel").hide();
								$("#node-input-format").hide();
								$("#node-input-formatChecked").hide();
								$("#node-input-formatCheckedLabel").hide();
								$("#node-input-deviceTypeLabel").hide();
								$("#node-input-deviceType").hide();
								$("#node-input-deviceTypeChecked").hide();
								$("#node-input-deviceTypeCheckedLabel").hide();

							} else {
//								alert("CAME HERE........" + id);

							}
						});
					} 
				}
			});
		}
	});
</script>